\chapter{Praktiskais}

\section{RaspberryPi sagatavošana}

\subsection{Darbs ar Chef bez Chef servera}
Tā kā darbā paredzēts uzstādīt tikai vienu instanci, tika apskatīts kā izmantot Chef sniegtās iespējas arī bez Chef servera. Ir pieejami divi varianti, kā piemērot Chef receptes nekontaktējoties ar Chef serveri. Iespējams izmantot chef-zero vai chef-solo.
Kā priekšnosacījums darbam ar Chef ir izstrādātāja darbstacijas sagatavošana, kas apskatīta \ref{ChefDarbstacija} nodaļā.
\subsubsection{Darbs ar Chef-zero}
Izmantojot \textit{chef-zero}, ir iespējams simulēt pagaidu Chef serveri datora atmiņā. Šo vēl vairāk atvieglo Knife-zero spraudnis (angl. \textit{plugin} \url{https://knife-zero.github.io/}), ar kura palīdzību var izdarīt tās pašas darbības, kā tad, ja ir uzstādīts Chef serveris.
Pēc tam konsolē var izpildīt sekojošas komandas:
\begin{lstlisting}[frame=single]
	chef gem install knife-zero
	chef generate repo test-repo
	cd test-repo
	chef generate cookbook cookbooks/testbook -b
	cd cookbooks/test-book
	berks vendor ../
	knife bootstrap IP_ADDRESS --local-mode --ssh-user vagrant --ssh-password 'vagrant' --sudo --use-sudo-password --run-list 'recipe[testbook]' --node-name chefnode
\end{lstlisting}
Karogs "-b" pie \textit{chef generate cookbook} komandas norāda, ka tiks uzstādīts Berkshelf integrācija, kas ļauj ērti atrisināt recepšu grāmatu atkarības.
Izmantojot \textit{berks vendor} komandu, Berkshelf lejuplādēs visas recepšu grāmatas, kuras ir nepieciešamas infrastruktūras uzstādīšanai.
Komanda \textit{knife bootstrap} veic vairākas darbības. Pirmkārt, tā uzstāda Chef klientu uz norādītās darbstacijas, otrkārt, tā uzstāda norādītās receptes.
Komandas \textit{knife bootstrap} karogu un mainīgo skaidrojums:
\begin{itemize}
	\item IP_ADDRESS -- pārvaldāmās darbstacijas IP adrese
	\item \texttt{--local-mode} -- norāda, ka darbs notiks ar Chef-zero
	\item \texttt{--ssh-user} -- SSH lietotāja vārds, ar kuru pieslēgsies
	\item \texttt{--ssh-password} -- SSH lietotāja parole, to nenorādot, tā tiktu pieprasīta komandas izpildes laikā
	\item \texttt{--use-sudo-password} -- Chef veic darbības kā root lietotājs, tāpēc nepieciešams izmantot lietotāju ar sudo tiesībām
	\item \texttt{--run-list} -- norāda kuras receptes tiks piemērotas pārvaldamajam mezglam
	\item \texttt{--node-name} -- mezgla nosaukums
\end{itemize}

\subsubsection{Lietojot Chef-solo}
Līdzīgi kā Chef-zero, Chef-solo ir vēl viens veids kā piemērot receptes iekārtām bez Chef servera. Chef-solo spēj piemērot receptes, kuras atrodas uz iekārtas.
\begin{itemize}
	\item Uz izstrādātāja darbstacijas lejuplādē visas recepšu grāmatas izmantojot berks vendor
	\item Uzstāda chef-client uz mezgla
	\item Nokopē uzstādāmās recepšu grāmatas uz /var/chef/cookbooks
	\item Izpilda \texttt{chef-solo --override-runlist RUNLIST}
\end{itemize}
Chef-solo komandas --override-runlist karogs nodefinē izpildāmās receptes.

\subsubsection{Hosted Chef}
Strādāt bez Chef servera nav tik viegli. Ar abiem iepriekšminētajiem variantiem ir problēmas, kuras var rasties un var nebūt nemaz tik viegli atrisināmas.
Tāpēc darba izstrādes laikā izmantots \textit{Hosted Chef}, kas ir vienkāršākais veids, kā sākt strādāt ar Chef.
Izveidojot kontu \url{https://manage.chef.io/}, ir iespējams ielogoties grafiskā Chef pārvaldības konsolē.
Pirmais, ko tajā nepieciešams izdarīt ir izveidot jaunu organizāciju. Tad ir iespējams lejuplādēt sākuma paku (angl. \textit{starter kit}), kas ir sagatavots Chef repozitorijs ar nepieciešamo Chef konfigurāciju. Chef servera organizācijās ir arī vairākas noklusējuma grupas (administratori, klienti, lietotāji), kuras tiek izmantotas, lai pārvaldītu izstrādātāju piekļuvi. Kā arī organizācijas satur uzstādītos Chef mezglus. Chef repozitorijā ir slēptā \textit{.chef} mape, kura satur \textit{knife.rb} datni, kurā ir norādīta Chef servera organizācijas adrese.

\section{Mājaslapas izstrāde}
Darba izstrāde tika balstīta uz Agile izstrādes modeli. Sākumā tika noteiktas minimālās "klienta" prasības, veikti mājaslapas un datubāzes struktūres uzmetumi. Notika regulāras tikšanās un prasības tika pastāvīgi papildinātas, gan no "klienta", gan no izstrādātāja puses ieteikumu veidā.

Mājaslapas izstrādē izmantoti šādi rīki:
\begin{itemize}
	\item Ruby on Rails tīmekļa lietojumprogrammu satvars.
	\item CSS -- Bootstrap satvars
	\item JavaScript -- jQuery
	\item Testēšana -- RSpec, Shoulda matchers, Factory Girl, Faker
	\item TravisCI -- CI serviss
	\item Codacy -- statiskas koda analīzes serviss
\end{itemize}

\subsection{Ruby on Rails}
Mājaslapas izstrādē izmantots Ruby on Rails tīmekļa lietojumprogrammu satvars, kas būtiski atvieglo spējīgu mājaslapu izstrādi. Rails


\subsection{RSpec}
RSpec jeb RubySpec ir populārākā Ruby testēšanas bibliotēka. RSpec tika izdots 2005. gadā.
\cite{shayRspec}
RSpec ir BDD testēšanas satvars. RSpec izmanto savu DSL, kas līdzinās dabiskas valodas specifikācijai. Lasot RSpec testus tiem būtu jāizklausās pēc normāliem teikumiem. Tā RSpec cenšas testus padarīt lasāmus un saprotamus.

\subsection{TravisCI}

\subsection{Lietotāji}
\subsection{Uzbrukumi}